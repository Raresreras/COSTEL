<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta charset="utf-8">

    <!-- Check and update for the latest bootstrap version -->    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <style>
        .square {
            height: 200px;
            width: 20%;
            background-color: #555;
            margin: 10px;
        }
    </style>

    <title>COSTEL</title>
</head>
<div class="container-fluid p-0">
    <nav class="navbar navbar-dark bg-dark">
        <span class="navbar-text p-2">
            COSTEL
        </span>
    </nav>
    <div class="container-fluid">
        <div class="card m-4">
            <div class="card-header bg-primary">
                <h1 class="text-white">Intrebare</h1>
            </div>
            <div class="card-body bg-dark">
                <h1 class="text-white" id="question">Awaiting question</h1>
            </div>
        </div>
        <div class="card m-4">
            <div class="card-body" style="display: flex; justify-content: center;">
                <div class="square" id="red" style="background-color: red;"></div>
                <div class="square" id="blue" style="background-color: blue;"></div>
                <div class="square" id="yellow" style="background-color: yellow;"></div>
                <div class="square" id="green" style="background-color: green;"></div>
            </div>
            <div class="card-body">
                <div class="form-inline">
                    <label for="questionInput">Red</label>
                    <input type="text" id="redInput">
                    <label for="questionInput">Blue</label>
                    <input type="text" id="blueInput">
                    <label for="questionInput">Yellow</label>
                    <input type="text" id="yellowInput">
                    <label for="questionInput">Green</label>
                    <input type="text" id="greenInput">
                </div>
                <button class="btn btn-primary m-2" onclick="get_input_data()">Set controls</button>
            </div>
        </div>
    </div>
        <script>
            let socket = new WebSocket('ws://localhost:8000');
            // Handle open event
            socket.addEventListener('open', () => {
                console.log('Connected to WebSocket server');
            });
            // Handle message event
            socket.addEventListener('message', (event) => {
                console.log('Message from server:', JSON.stringify(event.data));
                document.getElementById('question').innerHTML = event.data;
            });
            // Handle close event
            socket.addEventListener('close', () => {
                console.log('WebSocket connection closed');
            });

            //input handling

            let redInp = '';
            let blueInp = '';
            let yellowInp = '';
            let greenInp = '';

            function get_input_data(){
                redInp = document.getElementById('redInput').value;
                blueInp = document.getElementById('blueInput').value;
                yellowInp = document.getElementById('yellowInput').value;
                greenInp = document.getElementById('greenInput').value;
                console.log(redInp);
                console.log(blueInp);
                console.log(yellowInp);
                console.log(greenInp);
            }

            //keyboard
            document.addEventListener('keydown', (key) =>{
                console.log(key.code);
            });
            //controller
            let controllerIndex;
            document.addEventListener('gamepadconnected', (event) => {
                controllerIndex = event.gamepad.index();
                console.log('controller');
            });
        </script>
    </div>
</div>
</html>